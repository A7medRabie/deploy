import './polyfills.server.mjs';
import{a as L,b as d,c as E,d as T,e as A,f as y,g as V,h as q,i as N,j as P,k as D,l as G}from"./chunk-6HOURW7L.mjs";import"./chunk-PYCLQLC4.mjs";import{l as F}from"./chunk-DEJRCKNN.mjs";import"./chunk-3ZNO6LN7.mjs";import{Bb as l,Cb as S,Eb as w,Ja as s,Q as C,Ta as k,X as c,Y as g,Ya as u,a as v,eb as h,ib as p,mb as i,nb as o,ob as f,rb as _,tb as b,ub as x}from"./chunk-7VJMF4JZ.mjs";import"./chunk-X2SEQXRR.mjs";function I(e,t){if(e&1&&(i(0,"div",1)(1,"span",11),l(2),o()()),e&2){let r=x();s(2),S(r.api_error)}}function M(e,t){e&1&&(i(0,"div",1)(1,"span",11),l(2,"Must be required !"),o()())}function R(e,t){e&1&&(i(0,"div",1)(1,"span",11),l(2,"invaild email !"),o()())}function z(e,t){if(e&1){let r=_();i(0,"i",12),b("click",function(){c(r);let n=x();return g(n.togglePassword())}),o()}}function j(e,t){if(e&1){let r=_();i(0,"i",13),b("click",function(){c(r);let n=x();return g(n.togglePassword())}),o()}}function B(e,t){e&1&&(i(0,"div",1)(1,"span",11),l(2,"Must be required !"),o()())}function U(e,t){e&1&&(i(0,"div",1)(1,"span",11),l(2,"invaild password !"),o()())}function Z(e,t){e&1&&f(0,"i",10)}function $(e,t){e&1&&l(0,"Submit")}var O=class e{_AuthService=C(G);_Router=C(F);api_error;isCallingApi=!1;subscription=new v;loginForm;togglePass=!1;ngOnInit(){this.initForm()}initForm(){this.loginForm=new A({email:new y(null,[d.required,d.email]),password:new y(null,[d.required,d.pattern(/^[A-Z]\w{5}$/)])})}login(){this.loginForm.invalid?this.loginForm.markAllAsTouched():this.isCallingApi||(this.isCallingApi=!0,this.api_error="",this.subscription=this._AuthService.login(this.loginForm.value).subscribe({next:t=>{console.log(t),this.isCallingApi=!1,this._Router.navigateByUrl("/home")},error:t=>{this.api_error=t.error.message,console.log(t),console.log(this.api_error),this.isCallingApi=!1},complete(){}}))}togglePassword(){this.togglePass=!this.togglePass}ngOnDestroy(){this.subscription.unsubscribe}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=k({type:e,selectors:[["app-login"]],decls:21,vars:7,consts:[[1,"max-w-md","mx-auto","mt-4",3,"ngSubmit","formGroup"],["role","alert",1,"p-4","my-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[1,"relative","z-0","w-full","mb-5","group"],["type","email","formControlName","email","name","floating_email","id","floating_email","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-main","focus:outline-none","focus:ring-0","focus:border-main","peer"],["for","floating_email",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-main","peer-focus:dark:text-main","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","password","name","floating_password","id","floating_password","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-main","focus:outline-none","focus:ring-0","focus:border-main","peer",3,"type"],["for","floating_password",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-main","peer-focus:dark:text-main","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"fa-solid","fa-eye-slash","absolute","top-3","right-0","cursor-pointer"],[1,"fa-solid","fa-eye","absolute","top-3","right-0","cursor-pointer"],["type","submit",1,"text-white","bg-main","hover:bg-green-500","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-full","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],[1,"fas","fa-spinner","fa-spin"],[1,"font-medium"],[1,"fa-solid","fa-eye-slash","absolute","top-3","right-0","cursor-pointer",3,"click"],[1,"fa-solid","fa-eye","absolute","top-3","right-0","cursor-pointer",3,"click"]],template:function(r,a){if(r&1){let n=_();i(0,"form",0),b("ngSubmit",function(){return c(n),g(a.login())}),u(1,I,3,1,"div",1),i(2,"div",2),w(3),f(4,"input",3),i(5,"label",4),l(6,"email"),o(),u(7,M,3,0,"div",1)(8,R,3,0,"div",1),o(),i(9,"div",2),w(10),f(11,"input",5),i(12,"label",6),l(13,"password"),o(),u(14,z,1,0,"i",7)(15,j,1,0,"i",8)(16,B,3,0,"div",1)(17,U,3,0,"div",1),o(),i(18,"button",9),u(19,Z,1,0,"i",10)(20,$,1,0),o()()}if(r&2){h("formGroup",a.loginForm),s(),p(a.api_error?1:-1);let n=a.loginForm.get("email");s(6),p(n!=null&&n.getError("required")&&(n!=null&&n.touched)?7:n!=null&&n.getError("email")?8:-1);let m=a.loginForm.get("password");s(4),h("type",a.togglePass?"text":"password"),s(3),p(a.togglePass?14:15),s(2),p(m!=null&&m.getError("required")&&(m!=null&&m.touched)?16:m!=null&&m.getError("pattern")?17:-1),s(3),p(a.isCallingApi?19:20)}},dependencies:[D,V,L,E,T,P,q,N],encapsulation:2})};export{O as LoginComponent};
